<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advik's Birthday Hunt</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fff8e1;
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    #main, #riddle, #clues, #final-container {
      display: none;
    }
    .puzzle {
      margin: 1rem;
      border: 2px solid #ffc107;
      padding: 1rem;
      border-radius: 10px;
      background: #fffde7;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #ffd54f;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    input {
      padding: 10px;
      font-size: 16px;
      margin-top: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <div id="main">
    <h1>üéâ Congrats on finding the hint!</h1>
    <button onclick="startRiddle()">Press to continue</button>
  </div>

  <div id="riddle">
    <h2>I speak without a mouth and hear without ears.<br>I have nobody, but I come alive with wind.<br>What am I?</h2>
    <input id="riddleAnswer" placeholder="Your answer..." />
    <button onclick="checkRiddle()">Submit</button>
    <p id="riddleMsg"></p>
  </div>

  <div id="clues">
    <div class="puzzle" id="puzzle1">
      <p>üî¢ Tap to sort: 5, 1, 3 (descending)</p>
      <button onclick="solvePuzzle(1)">1st Puzzle Done</button>
    </div>
    <p id="clue1"></p>

    <div class="puzzle" id="puzzle2" style="display:none">
      <p>üß© What comes next: 2, 4, 6, ?</p>
      <button onclick="solvePuzzle(2)">2nd Puzzle Done</button>
    </div>
    <p id="clue2"></p>

    <div class="puzzle" id="puzzle3" style="display:none">
      <p>üß† Which doesn‚Äôt belong? Apple, Banana, Car, Grape</p>
      <button onclick="solvePuzzle(3)">3rd Puzzle Done</button>
    </div>
    <p id="clue3"></p>

    <div class="puzzle" id="puzzle4" style="display:none">
      <p>üîÅ Unscramble this: "ananab + daerb"</p>
      <button onclick="solvePuzzle(4)">4th Puzzle Done</button>
    </div>
    <p id="clue4"></p>

    <input id="finalInput" placeholder="Enter password..." />
    <button onclick="checkPassword()">Submit</button>
    <p id="passMsg"></p>
  </div>

  <div id="final-container"></div>

  <script>
    document.getElementById('main').style.display = 'block';

    function startRiddle() {
      document.getElementById('main').style.display = 'none';
      document.getElementById('riddle').style.display = 'block';
    }

    function checkRiddle() {
      const ans = document.getElementById('riddleAnswer').value.toLowerCase().trim();
      if (ans === 'echo') {
        document.getElementById('riddle').style.display = 'none';
        document.getElementById('clues').style.display = 'block';
      } else {
        document.getElementById('riddleMsg').textContent = '‚ùå Try again!';
      }
    }

    function solvePuzzle(num) {
      if (num === 1) {
        document.getElementById('clue1').textContent = 'üßÅ It‚Äôs sweet';
        document.getElementById('puzzle2').style.display = 'block';
      }
      if (num === 2) {
        document.getElementById('clue2').textContent = 'üçì Made with fruit';
        document.getElementById('puzzle3').style.display = 'block';
      }
      if (num === 3) {
        document.getElementById('clue3').textContent = 'üòã You‚Äôve tried it';
        document.getElementById('puzzle4').style.display = 'block';
      }
      if (num === 4) {
        document.getElementById('clue4').textContent = 'üçåüçû';
      }
    }

    function checkPassword() {
      const pass = document.getElementById('finalInput').value.toLowerCase().replace(/\s/g, '');
      if (pass === 'bananabread') {
        document.getElementById('clues').style.display = 'none';
        playVideoAndShowFinalClue();
      } else {
        document.getElementById('passMsg').textContent = '‚ùå Nope! Try again';
      }
    }

    function playVideoAndShowFinalClue() {
      const finalContainer = document.getElementById('final-container');
      finalContainer.innerHTML = '<div id="player"></div>';

      if (!window.YT) {
        let tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        let firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
      }

      window.onYouTubeIframeAPIReady = () => {
        let player = new YT.Player('player', {
          videoId: 'V8cP89V5UoM',
          events: {
            'onReady': event => {
              event.target.playVideo();
              let iframe = event.target.getIframe();
              if (iframe.requestFullscreen) iframe.requestFullscreen();
              else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
              else if (iframe.mozRequestFullScreen) iframe.mozRequestFullScreen();
            },
            'onStateChange': event => {
              if (event.data === YT.PlayerState.ENDED) {
                document.exitFullscreen?.();
                finalContainer.innerHTML = '<h2>üó∫ Final Clue: Go to your sister</h2>';
              }
            }
          }
        });
      };
    }
  </script>
</body>
</html>
